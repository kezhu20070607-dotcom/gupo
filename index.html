<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç»™æœ€äº²çˆ±çš„å§‘å©†</title>
    <style>
        body { background-color: #fff9f0; margin: 0; overflow: hidden; height: 100vh; width: 100vw; font-family: "Microsoft YaHei", sans-serif; }
        .window { position: absolute; width: 95px; height: 55px; background: #fff; border: 1.5px solid #d4af37; border-radius: 8px; box-shadow: 0 4px 10px rgba(184, 134, 11, 0.2); display: flex; flex-direction: column; animation: pop 0.4s ease-out forwards; opacity: 0; pointer-events: none; }
        .title-bar { height: 14px; background: #c0392b; display: flex; justify-content: flex-end; align-items: center; padding: 0 5px; }
        .dot { width: 5px; height: 5px; background: #f1c40f; border-radius: 50%; margin-left: 3px; }
        .content { flex: 1; display: flex; justify-content: center; align-items: center; font-size: 11px; color: #c0392b; font-weight: bold; text-align: center; padding: 2px; }
        @keyframes pop { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        #final-msg { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 100; background: white; padding: 25px; border-radius: 15px; border: 4px solid #c0392b; text-align: center; display: none; width: 75%; box-shadow: 0 0 40px rgba(192, 57, 43, 0.4); }
        /* éŸ³ä¹æ§åˆ¶æŒ‰é’® */
        #music-btn { position: fixed; top: 20px; right: 20px; z-index: 1000; width: 30px; height: 30px; background: rgba(192, 57, 43, 0.8); border-radius: 50%; display: flex; justify-content: center; align-items: center; color: white; cursor: pointer; font-size: 12px; }
    </style>
</head>
<body>

<audio id="bgm" loop>
    <source src="https://music.163.com/song/media/outer/url?id=1373511119.mp3" type="audio/mpeg">
</audio>

<div id="music-btn" onclick="toggleMusic()">ğŸµ</div>

<div id="final-msg">
    <h2 style="color: #c0392b;">äº²çˆ±çš„å§‘å©† â¤ï¸</h2>
    <p style="font-size: 16px; color: #333; line-height: 1.8;">
        ç¥æ‚¨ï¼š<br>
        <b>ç¦å¦‚ä¸œæµ·ï¼Œå¯¿æ¯”å—å±±ï¼</b><br>
        ç¬‘å£å¸¸å¼€ï¼Œèº«ä½“åº·å¥ï¼
    </p>
</div>

<script>
    const messages = [
        "ç¥å§‘å©†å¥åº·", "é•¿å‘½ç™¾å²", "ç¬‘å£å¸¸å¼€", "ç¦æ˜Ÿé«˜ç…§", "ä¸‡äº‹å¤§å‰", "å¤©å¤©å¼€å¿ƒ",
        "èº«ä½“ç¡¬æœ—", "å²å²å¹³å®‰", "å‰ç¥¥å¦‚æ„", "ç¦æ°”æ»¡æ»¡", "å¿ƒæƒ³äº‹æˆ", "åˆå®¶æ¬¢ä¹",
        "å–œæ°”æ´‹æ´‹", "å¿ƒæƒ…èˆ’ç•…", "æ¾é¹¤é•¿æ˜¥", "æ™šå¹´å¹¸ç¦", "â¤ï¸çˆ±æ‚¨â¤ï¸", "é€æ‚¨çœŸå¿ƒ"
    ];

    // ä¼˜åŒ–1ï¼šå‡å°‘çª—å£æ•°é‡åˆ° 50 ä¸ªï¼Œè®©çˆ±å¿ƒæˆå‹æ›´å¿«
    const numWindows = 50; 
    const heartSize = window.innerWidth / 38;
    const audio = document.getElementById('bgm');

    function toggleMusic() {
        if (audio.paused) { audio.play(); } else { audio.pause(); }
    }

    function createHeartPoint(t) {
        const x = 16 * Math.pow(Math.sin(t), 3);
        const y = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t);
        return { x: x * heartSize, y: -y * heartSize - 50 };
    }

    function spawn(i) {
        if (i >= numWindows) {
            setTimeout(() => { document.getElementById('final-msg').style.display = 'block'; }, 500);
            return;
        }
        const t = (Math.PI * 2 / numWindows) * i;
        const pos = createHeartPoint(t);
        const win = document.createElement('div');
        win.className = 'window';
        win.style.left = (window.innerWidth / 2 + pos.x - 47) + 'px';
        win.style.top = (window.innerHeight / 2 + pos.y - 27) + 'px';
        win.innerHTML = `<div class="title-bar"><div class="dot"></div><div class="dot"></div></div><div class="content">${messages[i % messages.length]}</div>`;
        document.body.appendChild(win);

        // ä¼˜åŒ–2ï¼šé—´éš”æ”¹ä¸º 200msï¼Œæ•´ä½“æˆå‹çº¦ 10 ç§’ï¼ŒèŠ‚å¥æ„Ÿæ›´å¥½
        setTimeout(() => spawn(i + 1), 200);
    }

    // é¡µé¢åŠ è½½åç‚¹å‡»ä»»æ„åœ°æ–¹å¼€å§‹åŠ¨ç”»å¹¶å°è¯•æ’­æ”¾éŸ³ä¹ï¼ˆæµè§ˆå™¨å®‰å…¨æœºåˆ¶é€šå¸¸è¦æ±‚ç‚¹å‡»åæ‰èƒ½æ’­å£°éŸ³ï¼‰
    window.onclick = () => {
        if (audio.paused) audio.play();
    };

    window.onload = () => {
        setTimeout(() => spawn(0), 1000);
    };
</script>
</body>
</html>
